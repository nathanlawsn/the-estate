---
import { Icon } from "astro-icon";
import Layout from "../../../layouts/Layout.astro";
import Container from "../../../components/Container.astro";
import Card from "../../../components/Card.astro";
import CategoryFilters from "../../../components/CategoryFilters.astro";

const { slug } = Astro.params;

let res = await fetch(
    `http://theestate.cargo/wp-json/wp/v2/categories?slug=${slug}`
);
let [post] = await res.json();

// The getStaticPaths() is required for static Astro sites.
// If using SSR, you will not need this function.
export async function getStaticPaths() {
    let data = await fetch("http://theestate.cargo/wp-json/wp/v2/categories");
    let posts = await data.json();

    return posts.map((post) => ({
        params: { slug: post.slug },
        props: { post: post },
    }));
}
---

<Layout title="Blog | The Estate" nav>
    <section class="pt-24 pb-36">
        <Container>
            <CategoryFilters />

            <div class="flex flex-col gap-20">
                <div
                    class="grid gap-10 md:gap-x-0 md:gap-y-20 md:grid-cols-2 lg:grid-cols-3"
                >
                    <!-- {
                        posts.map((post) => (
                            <Card
                                title={post.title.rendered}
                                text={post.acf.short_description}
                                category={post.acf.category[0].name}
                                imageUrl={post.acf.image.url}
                                imageAlt={post.acf.image.alt}
                                slug={post.slug}
                            />
                        ))
                    } -->
                </div>

                <a
                    class="bg-orange-400 text-white flex items-center gap-5 sm:gap-[4.75rem] px-5 md:px-11 py-3 min-h-[5rem] sm:min-h-[6.25rem] w-full hover:bg-primary-purple transition-colors duration-500 ease-in-out group text-center justify-center"
                    href="#"
                >
                    <span class="text-2xl sm:text-[2.125rem] ml-auto"
                        >Load more articles</span
                    >
                    <span
                        class="block w-6 h-6 sm:w-8 sm:h-8 group-hover:rotate-45 duration-500 ease-in-out ml-auto"
                    >
                        <svg viewBox="0 0 17.978 17.978" astro-icon="arrow"
                            ><g
                                fill="none"
                                stroke="currentColor"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                ><path
                                    d="m1.414 16.564 15.15-15.15"
                                    data-name="Line 1"></path><path
                                    d="M1.414 1.414h15.18v15.18"
                                    data-name="Path 1"></path></g
                            ></svg
                        >
                    </span>
                </a>
            </div>
        </Container>
    </section>
</Layout>
